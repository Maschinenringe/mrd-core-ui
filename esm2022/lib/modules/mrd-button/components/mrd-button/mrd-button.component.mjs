import { ConfigUtil } from './../../../../common/util/config.util';
import { ObservableValue } from 'mrd-core';
import { ChangeDetectionStrategy, Component, Input, booleanAttribute } from '@angular/core';
import { ColorUtil } from '../../../../common/util/color.util';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
const _c0 = function (a0, a1, a2, a3, a4, a5, a6) { return { "s-icon-button": a0, "s-raised-button": a1, "s-outline-button": a2, "s-flat-button": a3, "s-fab-button": a4, "s-mini-fab-button": a5, "disabled": a6 }; };
const _c1 = ["*"];
export class MrdButtonComponent {
    cdr;
    icon = false;
    raised = false;
    outline = false;
    flat = false;
    fab = false;
    miniFab = false;
    set primary(value) {
        this._primary = value;
        if (value) {
            this.bgColor = this._config.baseColors.primary;
            this.textColor = ColorUtil.shouldTextBeDark(this._config.baseColors.primary) ? this.textDarkColor : this.textLightColor;
            this.hoverColor = ColorUtil.changeColorOpacity(this._config.baseColors.primary, 10);
            this.activeColor = ColorUtil.changeColorOpacity(ColorUtil.changeColorBrightnessPercent(this._config.baseColors.primary, 10), 30);
        }
    }
    get primary() {
        return this._primary;
    }
    _primary = false;
    set accent(value) {
        this._accent = value;
        if (value) {
            this.bgColor = this._config.baseColors.accent;
            this.textColor = ColorUtil.shouldTextBeDark(this._config.baseColors.accent) ? this.textDarkColor : this.textLightColor;
            this.hoverColor = ColorUtil.changeColorOpacity(this._config.baseColors.accent, 20);
            this.activeColor = ColorUtil.changeColorOpacity(ColorUtil.changeColorBrightnessPercent(this._config.baseColors.accent, 10), 30);
        }
    }
    get accent() {
        return this._accent;
    }
    _accent = false;
    set warn(value) {
        this._warn = value;
        if (value) {
            this.bgColor = this._config.baseColors.warn;
            this.textColor = ColorUtil.shouldTextBeDark(this._config.baseColors.warn) ? this.textDarkColor : this.textLightColor;
            this.hoverColor = ColorUtil.changeColorOpacity(this._config.baseColors.warn, 20);
            this.activeColor = ColorUtil.changeColorOpacity(ColorUtil.changeColorBrightnessPercent(this._config.baseColors.warn, 10), 30);
        }
    }
    get warn() {
        return this._warn;
    }
    _warn = false;
    set disabled(value) {
        this._disabled = value;
    }
    ;
    get disabled() {
        return this._disabled;
    }
    _disabled = false;
    loading = new ObservableValue(false);
    // @Output() public click: EventEmitter<void> = new EventEmitter();
    _config = ConfigUtil.getConfig();
    _defaultBgColor = 'transparent';
    _defaultTextLightColor = '#ffffff';
    _defaultTextDarkColor = '#000000';
    _defaultHoverColor = '#d3d3d361';
    _defaultActiveColor = '#d3d3d3';
    _defaultDisabledTextColor = '#a6a6a6';
    _defaultDisabledBgColor = '#d3d3d3';
    _defaultOutlineBorderWidth = '1px';
    _defaultOutlineBorderStyle = 'solid';
    _defaultOutlineBorderColor = '#d3d3d3';
    bgColor = this._config?.button?.backgroundColor || this._defaultBgColor;
    textLightColor = this._config?.button?.textLightColor || this._defaultTextLightColor;
    textDarkColor = this._config?.button?.textDarkColor || this._defaultTextDarkColor;
    textColor = this.textDarkColor;
    hoverColor = this._config?.button?.hoverColor || this._defaultHoverColor;
    activeColor = this._config?.button?.activeColor || this._defaultActiveColor;
    disabledTextColor = this._config?.button?.disabled.text || this._defaultDisabledTextColor;
    disabledBgColor = this._config?.button?.disabled.background || this._defaultDisabledBgColor;
    outlineBorderWidth = this._defaultOutlineBorderWidth;
    outlineBorderStyle = this._defaultOutlineBorderStyle;
    outlineBorderColor = this._defaultOutlineBorderColor;
    constructor(cdr) {
        this.cdr = cdr;
    }
    ngOnInit() {
    }
    ngAfterViewInit() {
        let themesCount = [this.primary, this.accent, this.warn].filter((value) => value).length;
        if (themesCount > 1) {
            console.error('Only one theme can be set at a time. Please set only one of the following: primary, accent, warn');
        }
        let appearanceCount = [this.icon, this.raised, this.outline, this.flat, this.fab, this.miniFab].filter((value) => value).length;
        if (appearanceCount > 1) {
            console.error('Only one appearance can be set at a time. Please set only one of the following: icon, raised, outline, flat, fab, miniFab');
        }
        if (appearanceCount === 0 || this.outline || this.icon) {
            if (themesCount === 1) {
                this.textColor = this.bgColor;
                this.bgColor = this._defaultBgColor;
            }
            this.disabledBgColor = 'transparent';
        }
        if ((this.raised || this.flat) && themesCount === 0) {
            this.bgColor = 'white';
        }
        this.cdr.detectChanges();
    }
    /** @nocollapse */ static ɵfac = function MrdButtonComponent_Factory(t) { return new (t || MrdButtonComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };
    /** @nocollapse */ static ɵcmp = /** @pureOrBreakMyCode */ i0.ɵɵdefineComponent({ type: MrdButtonComponent, selectors: [["mrd-button"]], inputs: { icon: ["icon-button", "icon", booleanAttribute], raised: ["raised-button", "raised", booleanAttribute], outline: ["outline-button", "outline", booleanAttribute], flat: ["flat-button", "flat", booleanAttribute], fab: ["fab-button", "fab", booleanAttribute], miniFab: ["miniFab-button", "miniFab", booleanAttribute], primary: ["primary", "primary", booleanAttribute], accent: ["accent", "accent", booleanAttribute], warn: ["warn", "warn", booleanAttribute], disabled: ["disabled", "disabled", booleanAttribute], loading: "loading" }, features: [i0.ɵɵInputTransformsFeature], ngContentSelectors: _c1, decls: 4, vars: 27, consts: [[1, "s-button-container", 3, "ngClass"], [1, "s-button-focus"], [1, "s-button-content"]], template: function MrdButtonComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵprojectionDef();
            i0.ɵɵelementStart(0, "button", 0);
            i0.ɵɵelement(1, "div", 1);
            i0.ɵɵelementStart(2, "span", 2);
            i0.ɵɵprojection(3);
            i0.ɵɵelementEnd()();
        } if (rf & 2) {
            i0.ɵɵstyleProp("--bg-color", ctx.bgColor)("--text-color", ctx.textColor)("--disabled-text-color", ctx.disabledTextColor)("--disabled-bg-color", ctx.disabledBgColor)("--outline-width", ctx.outlineBorderWidth)("--outline-color", ctx.outlineBorderColor)("--outline-style", ctx.outlineBorderStyle);
            i0.ɵɵproperty("ngClass", i0.ɵɵpureFunction7(19, _c0, ctx.icon, ctx.raised, ctx.outline, ctx.flat, ctx.fab, ctx.miniFab, ctx.disabled));
            i0.ɵɵadvance(1);
            i0.ɵɵstyleProp("--hover-color", ctx.hoverColor)("--active-color", ctx.activeColor);
        } }, dependencies: [i1.NgClass], styles: ["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center}.s-button-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;justify-content:center;min-height:36px;min-width:64px;padding:0 16px;font-size:.9em;font-weight:700;letter-spacing:.1px;border-radius:4px;background-color:var(--bg-color);color:var(--text-color)}.s-button-container[_ngcontent-%COMP%]   .s-button-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex:1;z-index:1}.s-button-container.disabled[_ngcontent-%COMP%]{color:var(--disabled-text-color);background-color:var(--disabled-bg-color);pointer-events:none;cursor:initial}.s-button-container[_ngcontent-%COMP%]:hover:not(.disabled)   .s-button-focus[_ngcontent-%COMP%]{background-color:var(--hover-color)}.s-button-container[_ngcontent-%COMP%]:active:not(.disabled)   .s-button-focus[_ngcontent-%COMP%]{background-color:var(--active-color)}.s-button-container[_ngcontent-%COMP%]   .s-button-focus[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:4px}.s-button-container.s-outline-button[_ngcontent-%COMP%]{border:var(--outline-width) var(--outline-style) var(--outline-color)}.s-button-container.s-raised-button[_ngcontent-%COMP%]:not(.disabled){--webkit-box-shadow: 1px 1px 6px 2px rgba(0, 0, 0, .25);box-shadow:1px 1px 6px 2px #00000040}.s-button-container.s-raised-button[_ngcontent-%COMP%]:not(.disabled):active{--webkit-box-shadow: 2px 2px 6px 3px rgba(0, 0, 0, .25);box-shadow:2px 2px 6px 3px #00000040}.s-button-container.s-icon-button[_ngcontent-%COMP%], .s-button-container.s-mini-fab-button[_ngcontent-%COMP%]{min-width:unset;min-height:unset;width:3em;height:3em;font-size:1em;padding:0;border-radius:50%}.s-button-container.s-icon-button[_ngcontent-%COMP%]   .s-button-focus[_ngcontent-%COMP%], .s-button-container.s-mini-fab-button[_ngcontent-%COMP%]   .s-button-focus[_ngcontent-%COMP%]{border-radius:50%}.s-button-container.s-icon-button[_ngcontent-%COMP%]     [s-icon], .s-button-container.s-mini-fab-button[_ngcontent-%COMP%]     [s-icon]{margin:0}.s-button-container.s-mini-fab-button[_ngcontent-%COMP%]:not(.disabled){--webkit-box-shadow: 1px 1px 6px 2px rgba(0, 0, 0, .25);box-shadow:1px 1px 6px 2px #00000040}.s-button-container.s-fab-button[_ngcontent-%COMP%]{min-width:unset;min-height:unset;width:2em;height:2em;font-size:2em;padding:0;border-radius:50%}.s-button-container.s-fab-button[_ngcontent-%COMP%]   .s-button-focus[_ngcontent-%COMP%]{border-radius:50%}.s-button-container.s-fab-button[_ngcontent-%COMP%]     [s-icon]{margin:0;font-size:1em;width:1em;height:1em}.s-button-container.s-fab-button[_ngcontent-%COMP%]:not(.disabled){--webkit-box-shadow: 1px 1px 6px 2px rgba(0, 0, 0, .25);box-shadow:1px 1px 6px 2px #00000040}.s-button-container.s-fab-button[_ngcontent-%COMP%]:not(.disabled):active{--webkit-box-shadow: 2px 2px 6px 3px rgba(0, 0, 0, .25);box-shadow:2px 2px 6px 3px #00000040}.s-button-container[_ngcontent-%COMP%]     [s-icon]{font-size:1.5em;margin-right:4px;margin-top:2px;width:1em;height:1em}.s-button-container[_ngcontent-%COMP%]     [s-icon][icon-end]{margin-right:0;margin-left:4px}"], changeDetection: 0 });
}
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(MrdButtonComponent, [{
        type: Component,
        args: [{ selector: 'mrd-button', changeDetection: ChangeDetectionStrategy.OnPush, template: "<button class=\"s-button-container\"\n  [style.--bg-color]=\"bgColor\"\n  [style.--text-color]=\"textColor\"\n  [style.--disabled-text-color]=\"disabledTextColor\"\n  [style.--disabled-bg-color]=\"disabledBgColor\"\n  [style.--outline-width]=\"outlineBorderWidth\"\n  [style.--outline-color]=\"outlineBorderColor\"\n  [style.--outline-style]=\"outlineBorderStyle\"\n  [ngClass]=\"{'s-icon-button': icon, 's-raised-button': raised, 's-outline-button': outline,\n    's-flat-button': flat, 's-fab-button': fab, 's-mini-fab-button': miniFab, 'disabled': disabled}\">\n  <div class=\"s-button-focus\" [style.--hover-color]=\"hoverColor\" [style.--active-color]=\"activeColor\"></div>\n  <span class=\"s-button-content\"><ng-content></ng-content></span>\n</button>\n", styles: [":host{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center}.s-button-container{position:relative;display:flex;flex-direction:row;align-items:center;justify-content:center;min-height:36px;min-width:64px;padding:0 16px;font-size:.9em;font-weight:700;letter-spacing:.1px;border-radius:4px;background-color:var(--bg-color);color:var(--text-color)}.s-button-container .s-button-content{display:flex;flex-direction:row;align-items:center;justify-content:center;flex:1;z-index:1}.s-button-container.disabled{color:var(--disabled-text-color);background-color:var(--disabled-bg-color);pointer-events:none;cursor:initial}.s-button-container:hover:not(.disabled) .s-button-focus{background-color:var(--hover-color)}.s-button-container:active:not(.disabled) .s-button-focus{background-color:var(--active-color)}.s-button-container .s-button-focus{position:absolute;inset:0;border-radius:4px}.s-button-container.s-outline-button{border:var(--outline-width) var(--outline-style) var(--outline-color)}.s-button-container.s-raised-button:not(.disabled){--webkit-box-shadow: 1px 1px 6px 2px rgba(0, 0, 0, .25);box-shadow:1px 1px 6px 2px #00000040}.s-button-container.s-raised-button:not(.disabled):active{--webkit-box-shadow: 2px 2px 6px 3px rgba(0, 0, 0, .25);box-shadow:2px 2px 6px 3px #00000040}.s-button-container.s-icon-button,.s-button-container.s-mini-fab-button{min-width:unset;min-height:unset;width:3em;height:3em;font-size:1em;padding:0;border-radius:50%}.s-button-container.s-icon-button .s-button-focus,.s-button-container.s-mini-fab-button .s-button-focus{border-radius:50%}.s-button-container.s-icon-button ::ng-deep [s-icon],.s-button-container.s-mini-fab-button ::ng-deep [s-icon]{margin:0}.s-button-container.s-mini-fab-button:not(.disabled){--webkit-box-shadow: 1px 1px 6px 2px rgba(0, 0, 0, .25);box-shadow:1px 1px 6px 2px #00000040}.s-button-container.s-fab-button{min-width:unset;min-height:unset;width:2em;height:2em;font-size:2em;padding:0;border-radius:50%}.s-button-container.s-fab-button .s-button-focus{border-radius:50%}.s-button-container.s-fab-button ::ng-deep [s-icon]{margin:0;font-size:1em;width:1em;height:1em}.s-button-container.s-fab-button:not(.disabled){--webkit-box-shadow: 1px 1px 6px 2px rgba(0, 0, 0, .25);box-shadow:1px 1px 6px 2px #00000040}.s-button-container.s-fab-button:not(.disabled):active{--webkit-box-shadow: 2px 2px 6px 3px rgba(0, 0, 0, .25);box-shadow:2px 2px 6px 3px #00000040}.s-button-container ::ng-deep [s-icon]{font-size:1.5em;margin-right:4px;margin-top:2px;width:1em;height:1em}.s-button-container ::ng-deep [s-icon][icon-end]{margin-right:0;margin-left:4px}\n"] }]
    }], function () { return [{ type: i0.ChangeDetectorRef }]; }, { icon: [{
            type: Input,
            args: [{ alias: 'icon-button', transform: booleanAttribute }]
        }], raised: [{
            type: Input,
            args: [{ alias: 'raised-button', transform: booleanAttribute }]
        }], outline: [{
            type: Input,
            args: [{ alias: 'outline-button', transform: booleanAttribute }]
        }], flat: [{
            type: Input,
            args: [{ alias: 'flat-button', transform: booleanAttribute }]
        }], fab: [{
            type: Input,
            args: [{ alias: 'fab-button', transform: booleanAttribute }]
        }], miniFab: [{
            type: Input,
            args: [{ alias: 'miniFab-button', transform: booleanAttribute }]
        }], primary: [{
            type: Input,
            args: [{ transform: booleanAttribute }]
        }], accent: [{
            type: Input,
            args: [{ transform: booleanAttribute }]
        }], warn: [{
            type: Input,
            args: [{ transform: booleanAttribute }]
        }], disabled: [{
            type: Input,
            args: [{ transform: booleanAttribute }]
        }], loading: [{
            type: Input
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXJkLWJ1dHRvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tcmQtY29yZS11aS9zcmMvbGliL21vZHVsZXMvbXJkLWJ1dHRvbi9jb21wb25lbnRzL21yZC1idXR0b24vbXJkLWJ1dHRvbi5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tcmQtY29yZS11aS9zcmMvbGliL21vZHVsZXMvbXJkLWJ1dHRvbi9jb21wb25lbnRzL21yZC1idXR0b24vbXJkLWJ1dHRvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDbkUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUMzQyxPQUFPLEVBQWlCLHVCQUF1QixFQUFxQixTQUFTLEVBQWdCLEtBQUssRUFBa0IsZ0JBQWdCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUosT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG9DQUFvQyxDQUFDOzs7OztBQVMvRCxNQUFNLE9BQU8sa0JBQWtCO0lBd0ZuQjtJQXRGa0QsSUFBSSxHQUFZLEtBQUssQ0FBQztJQUNwQixNQUFNLEdBQVksS0FBSyxDQUFDO0lBQ3ZCLE9BQU8sR0FBWSxLQUFLLENBQUM7SUFDNUIsSUFBSSxHQUFZLEtBQUssQ0FBQztJQUN2QixHQUFHLEdBQVksS0FBSyxDQUFDO0lBQ2pCLE9BQU8sR0FBWSxLQUFLLENBQUM7SUFFeEYsSUFBaUQsT0FBTyxDQUFDLEtBQWM7UUFDckUsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE9BQWlCLENBQUM7WUFDekQsSUFBSSxDQUFD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RSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUM7WUFDSSxNQUFNO2tCQUFuRSxLQUFLO21CQUFDLEVBQUMsS0FBSyxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUM7WUFDRyxPQUFPO2tCQUFyRSxLQUFLO21CQUFDLEVBQUMsS0FBSyxFQUFFLGdCQUFnQixFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBQztZQUNELElBQUk7a0JBQS9ELEtBQUs7bUJBQUMsRUFBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBQztZQUNDLEdBQUc7a0JBQTdELEtBQUs7bUJBQUMsRUFBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBQztZQUNNLE9BQU87a0JBQXJFLEtBQUs7bUJBQUMsRUFBQyxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFDO1lBRVosT0FBTztrQkFBdkQsS0FBSzttQkFBQyxFQUFDLFNBQVMsRUFBRSxnQkFBZ0IsRUFBQztZQWFhLE1BQU07a0JBQXRELEtBQUs7bUJBQUMsRUFBQyxTQUFTLEVBQUUsZ0JBQWdCLEVBQUM7WUFhYSxJQUFJO2tCQUFwRCxLQUFLO21CQUFDLEVBQUMsU0FBUyxFQUFFLGdCQUFnQixFQUFDO1lBY2EsUUFBUTtrQkFBeEQsS0FBSzttQkFBQyxFQUFDLFNBQVMsRUFBRSxnQkFBZ0IsRUFBQztZQU9wQixPQUFPO2tCQUF0QixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29uZmlnVXRpbCB9IGZyb20gJy4vLi4vLi4vLi4vLi4vY29tbW9uL3V0aWwvY29uZmlnLnV0aWwnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZVZhbHVlIH0gZnJvbSAnbXJkLWNvcmUnO1xuaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBib29sZWFuQXR0cmlidXRlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb2xvclV0aWwgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21tb24vdXRpbC9jb2xvci51dGlsJztcbmltcG9ydCB7IE1yZENvbmZpZyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbW1vbi9tb2RlbC9jb25maWcubW9kZWwnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdtcmQtYnV0dG9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL21yZC1idXR0b24uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9tcmQtYnV0dG9uLmNvbXBvbmVudC5zY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIE1yZEJ1dHRvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XG5cbiAgQElucHV0KHthbGlhczogJ2ljb24tYnV0dG9uJywgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlfSkgaWNvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoe2FsaWFzOiAncmFpc2VkLWJ1dHRvbicsIHRyYW5zZm9ybTogYm9vbGVhbkF0dHJpYnV0ZX0pIHJhaXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoe2FsaWFzOiAnb3V0bGluZS1idXR0b24nLCB0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGV9KSBvdXRsaW5lOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCh7YWxpYXM6ICdmbGF0LWJ1dHRvbicsIHRyYW5zZm9ybTogYm9vbGVhbkF0dHJpYnV0ZX0pIGZsYXQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KHthbGlhczogJ2ZhYi1idXR0b24nLCB0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGV9KSBmYWI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KHthbGlhczogJ21pbmlGYWItYnV0dG9uJywgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlfSkgbWluaUZhYjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBJbnB1dCh7dHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlfSkgcHVibGljIHNldCBwcmltYXJ5KHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fcHJpbWFyeSA9IHZhbHVlO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5iZ0NvbG9yID0gdGhpcy5fY29uZmlnLmJhc2VDb2xvcnMucHJpbWFyeSBhcyBzdHJpbmc7XG4gICAgICB0aGlzLnRleHRDb2xvciA9IENvbG9yVXRpbC5zaG91bGRUZXh0QmVEYXJrKHRoaXMuX2NvbmZpZy5iYXNlQ29sb3JzLnByaW1hcnkgYXMgc3RyaW5nKSA/IHRoaXMudGV4dERhcmtDb2xvciA6IHRoaXMudGV4dExpZ2h0Q29sb3I7XG4gICAgICB0aGlzLmhvdmVyQ29sb3IgPSBDb2xvclV0aWwuY2hhbmdlQ29sb3JPcGFjaXR5KHRoaXMuX2NvbmZpZy5iYXNlQ29sb3JzLnByaW1hcnkgYXMgc3RyaW5nLCAxMCk7XG4gICAgICB0aGlzLmFjdGl2ZUNvbG9yID0gQ29sb3JVdGlsLmNoYW5nZUNvbG9yT3BhY2l0eShDb2xvclV0aWwuY2hhbmdlQ29sb3JCcmlnaHRuZXNzUGVyY2VudCh0aGlzLl9jb25maWcuYmFzZUNvbG9ycy5wcmltYXJ5IGFzIHN0cmluZywgMTApLCAzMCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgcHJpbWFyeSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fcHJpbWFyeTtcbiAgfVxuICBwcml2YXRlIF9wcmltYXJ5OiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCh7dHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlfSkgcHVibGljIHNldCBhY2NlbnQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hY2NlbnQgPSB2YWx1ZTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuYmdDb2xvciA9IHRoaXMuX2NvbmZpZy5iYXNlQ29sb3JzLmFjY2VudCBhcyBzdHJpbmc7XG4gICAgICB0aGlzLnRleHRDb2xvciA9IENvbG9yVXRpbC5zaG91bGRUZXh0QmVEYXJrKHRoaXMuX2NvbmZpZy5iYXNlQ29sb3JzLmFjY2VudCBhcyBzdHJpbmcpID8gdGhpcy50ZXh0RGFya0NvbG9yIDogdGhpcy50ZXh0TGlnaHRDb2xvcjtcbiAgICAgIHRoaXMuaG92ZXJDb2xvciA9IENvbG9yVXRpbC5jaGFuZ2VDb2xvck9wYWNpdHkodGhpcy5fY29uZmlnLmJhc2VDb2xvcnMuYWNjZW50IGFzIHN0cmluZywgMjApO1xuICAgICAgdGhpcy5hY3RpdmVDb2xvciA9IENvbG9yVXRpbC5jaGFuZ2VDb2xvck9wYWNpdHkoQ29sb3JVdGlsLmNoYW5nZUNvbG9yQnJpZ2h0bmVzc1BlcmNlbnQodGhpcy5fY29uZmlnLmJhc2VDb2xvcnMuYWNjZW50IGFzIHN0cmluZywgMTApLCAzMCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgYWNjZW50KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hY2NlbnQ7XG4gIH1cbiAgcHJpdmF0ZSBfYWNjZW50OiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCh7dHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlfSkgcHVibGljIHNldCB3YXJuKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fd2FybiA9IHZhbHVlO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5iZ0NvbG9yID0gdGhpcy5fY29uZmlnLmJhc2VDb2xvcnMud2FybiBhcyBzdHJpbmc7XG4gICAgICB0aGlzLnRleHRDb2xvciA9IENvbG9yVXRpbC5zaG91bGRUZXh0QmVEYXJrKHRoaXMuX2NvbmZpZy5iYXNlQ29sb3JzLndhcm4gYXMgc3RyaW5nKSA/IHRoaXMudGV4dERhcmtDb2xvciA6IHRoaXMudGV4dExpZ2h0Q29sb3I7XG4gICAgICB0aGlzLmhvdmVyQ29sb3IgPSBDb2xvclV0aWwuY2hhbmdlQ29sb3JPcGFjaXR5KHRoaXMuX2NvbmZpZy5iYXNlQ29sb3JzLndhcm4gYXMgc3RyaW5nLCAyMCk7XG4gICAgICB0aGlzLmFjdGl2ZUNvbG9yID0gQ29sb3JVdGlsLmNoYW5nZUNvbG9yT3BhY2l0eShDb2xvclV0aWwuY2hhbmdlQ29sb3JCcmlnaHRuZXNzUGVyY2VudCh0aGlzLl9jb25maWcuYmFzZUNvbG9ycy53YXJuIGFzIHN0cmluZywgMTApLCAzMCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgd2FybigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fd2FybjtcbiAgfVxuICBwcml2YXRlIF93YXJuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQElucHV0KHt0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGV9KSBwdWJsaWMgc2V0IGRpc2FibGVkKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSB2YWx1ZTtcbiAgfTtcbiAgcHVibGljIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cbiAgcHJpdmF0ZSBfZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgcHVibGljIGxvYWRpbmc6IE9ic2VydmFibGVWYWx1ZTxib29sZWFuPiA9IG5ldyBPYnNlcnZhYmxlVmFsdWUoZmFsc2UpO1xuXG4gIC8vIEBPdXRwdXQoKSBwdWJsaWMgY2xpY2s6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBwcml2YXRlIF9jb25maWc6IE1yZENvbmZpZyA9IENvbmZpZ1V0aWwuZ2V0Q29uZmlnKCk7XG5cbiAgcHJpdmF0ZSBfZGVmYXVsdEJnQ29sb3I6IHN0cmluZyA9ICd0cmFuc3BhcmVudCc7XG4gIHByaXZhdGUgX2RlZmF1bHRUZXh0TGlnaHRDb2xvcjogc3RyaW5nID0gJyNmZmZmZmYnO1xuICBwcml2YXRlIF9kZWZhdWx0VGV4dERhcmtDb2xvcjogc3RyaW5nID0gJyMwMDAwMDAnO1xuICBwcml2YXRlIF9kZWZhdWx0SG92ZXJDb2xvcjogc3RyaW5nID0gJyNkM2QzZDM2MSc7XG4gIHByaXZhdGUgX2RlZmF1bHRBY3RpdmVDb2xvcjogc3RyaW5nID0gJyNkM2QzZDMnO1xuICBwcml2YXRlIF9kZWZhdWx0RGlzYWJsZWRUZXh0Q29sb3I6IHN0cmluZyA9ICcjYTZhNmE2JztcbiAgcHJpdmF0ZSBfZGVmYXVsdERpc2FibGVkQmdDb2xvcjogc3RyaW5nID0gJyNkM2QzZDMnO1xuXG4gIHByaXZhdGUgX2RlZmF1bHRPdXRsaW5lQm9yZGVyV2lkdGg6IHN0cmluZyA9ICcxcHgnO1xuICBwcml2YXRlIF9kZWZhdWx0T3V0bGluZUJvcmRlclN0eWxlOiBzdHJpbmcgPSAnc29saWQnO1xuICBwcml2YXRlIF9kZWZhdWx0T3V0bGluZUJvcmRlckNvbG9yOiBzdHJpbmcgPSAnI2QzZDNkMyc7XG5cbiAgcHVibGljIGJnQ29sb3I6IHN0cmluZyA9IHRoaXMuX2NvbmZpZz8uYnV0dG9uPy5iYWNrZ3JvdW5kQ29sb3IgfHwgdGhpcy5fZGVmYXVsdEJnQ29sb3I7XG4gIHByaXZhdGUgdGV4dExpZ2h0Q29sb3I6IHN0cmluZyA9IHRoaXMuX2NvbmZpZz8uYnV0dG9uPy50ZXh0TGlnaHRDb2xvciB8fCB0aGlzLl9kZWZhdWx0VGV4dExpZ2h0Q29sb3I7XG4gIHByaXZhdGUgdGV4dERhcmtDb2xvcjogc3RyaW5nID0gdGhpcy5fY29uZmlnPy5idXR0b24/LnRleHREYXJrQ29sb3IgfHwgdGhpcy5fZGVmYXVsdFRleHREYXJrQ29sb3I7XG4gIHB1YmxpYyB0ZXh0Q29sb3I6IHN0cmluZyA9IHRoaXMudGV4dERhcmtDb2xvcjtcbiAgcHVibGljIGhvdmVyQ29sb3I6IHN0cmluZyA9IHRoaXMuX2NvbmZpZz8uYnV0dG9uPy5ob3ZlckNvbG9yIHx8IHRoaXMuX2RlZmF1bHRIb3ZlckNvbG9yO1xuICBwdWJsaWMgYWN0aXZlQ29sb3I6IHN0cmluZyA9IHRoaXMuX2NvbmZpZz8uYnV0dG9uPy5hY3RpdmVDb2xvciB8fCB0aGlzLl9kZWZhdWx0QWN0aXZlQ29sb3I7XG4gIHB1YmxpYyBkaXNhYmxlZFRleHRDb2xvcjogc3RyaW5nID0gdGhpcy5fY29uZmlnPy5idXR0b24/LmRpc2FibGVkLnRleHQgfHwgdGhpcy5fZGVmYXVsdERpc2FibGVkVGV4dENvbG9yO1xuICBwdWJsaWMgZGlzYWJsZWRCZ0NvbG9yOiBzdHJpbmcgPSB0aGlzLl9jb25maWc/LmJ1dHRvbj8uZGlzYWJsZWQuYmFja2dyb3VuZCB8fCB0aGlzLl9kZWZhdWx0RGlzYWJsZWRCZ0NvbG9yO1xuXG4gIHB1YmxpYyBvdXRsaW5lQm9yZGVyV2lkdGg6IHN0cmluZyA9IC8qdGhpcy5fY29uZmlnPy5idXR0b24/Lm91dGxpbmU/LmJvcmRlci53aWR0aCB8fCovIHRoaXMuX2RlZmF1bHRPdXRsaW5lQm9yZGVyV2lkdGg7XG4gIHB1YmxpYyBvdXRsaW5lQm9yZGVyU3R5bGU6IHN0cmluZyA9IC8qdGhpcy5fY29uZmlnPy5idXR0b24/Lm91dGxpbmU/LmJvcmRlci5zdHlsZSB8fCovIHRoaXMuX2RlZmF1bHRPdXRsaW5lQm9yZGVyU3R5bGU7XG4gIHB1YmxpYyBvdXRsaW5lQm9yZGVyQ29sb3I6IHN0cmluZyA9IC8qdGhpcy5fY29uZmlnPy5idXR0b24/Lm91dGxpbmU/LmJvcmRlci5jb2xvciB8fCovIHRoaXMuX2RlZmF1bHRPdXRsaW5lQm9yZGVyQ29sb3I7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmXG4gICkge31cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICBsZXQgdGhlbWVzQ291bnQgPSBbdGhpcy5wcmltYXJ5LCB0aGlzLmFjY2VudCwgdGhpcy53YXJuXS5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSkubGVuZ3RoO1xuICAgIGlmICh0aGVtZXNDb3VudCA+IDEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09ubHkgb25lIHRoZW1lIGNhbiBiZSBzZXQgYXQgYSB0aW1lLiBQbGVhc2Ugc2V0IG9ubHkgb25lIG9mIHRoZSBmb2xsb3dpbmc6IHByaW1hcnksIGFjY2VudCwgd2FybicpO1xuICAgIH1cbiAgICBsZXQgYXBwZWFyYW5jZUNvdW50ID0gW3RoaXMuaWNvbiwgdGhpcy5yYWlzZWQsIHRoaXMub3V0bGluZSwgdGhpcy5mbGF0LCB0aGlzLmZhYiwgdGhpcy5taW5pRmFiXS5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSkubGVuZ3RoO1xuICAgIGlmIChhcHBlYXJhbmNlQ291bnQgPiAxKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdPbmx5IG9uZSBhcHBlYXJhbmNlIGNhbiBiZSBzZXQgYXQgYSB0aW1lLiBQbGVhc2Ugc2V0IG9ubHkgb25lIG9mIHRoZSBmb2xsb3dpbmc6IGljb24sIHJhaXNlZCwgb3V0bGluZSwgZmxhdCwgZmFiLCBtaW5pRmFiJyk7XG4gICAgfVxuICAgIGlmIChhcHBlYXJhbmNlQ291bnQgPT09IDAgfHwgdGhpcy5vdXRsaW5lIHx8IHRoaXMuaWNvbikge1xuICAgICAgaWYgKHRoZW1lc0NvdW50ID09PSAxKSB7XG4gICAgICAgIHRoaXMudGV4dENvbG9yID0gdGhpcy5iZ0NvbG9yO1xuICAgICAgICB0aGlzLmJnQ29sb3IgPSB0aGlzLl9kZWZhdWx0QmdDb2xvcjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGlzYWJsZWRCZ0NvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICB9XG4gICAgaWYgKCh0aGlzLnJhaXNlZCB8fCB0aGlzLmZsYXQpICYmIHRoZW1lc0NvdW50ID09PSAwKSB7XG4gICAgICB0aGlzLmJnQ29sb3IgPSAnd2hpdGUnO1xuICAgIH1cblxuICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgfVxufVxuIiwiPGJ1dHRvbiBjbGFzcz1cInMtYnV0dG9uLWNvbnRhaW5lclwiXG4gIFtzdHlsZS4tLWJnLWNvbG9yXT1cImJnQ29sb3JcIlxuICBbc3R5bGUuLS10ZXh0LWNvbG9yXT1cInRleHRDb2xvclwiXG4gIFtzdHlsZS4tLWRpc2FibGVkLXRleHQtY29sb3JdPVwiZGlzYWJsZWRUZXh0Q29sb3JcIlxuICBbc3R5bGUuLS1kaXNhYmxlZC1iZy1jb2xvcl09XCJkaXNhYmxlZEJnQ29sb3JcIlxuICBbc3R5bGUuLS1vdXRsaW5lLXdpZHRoXT1cIm91dGxpbmVCb3JkZXJXaWR0aFwiXG4gIFtzdHlsZS4tLW91dGxpbmUtY29sb3JdPVwib3V0bGluZUJvcmRlckNvbG9yXCJcbiAgW3N0eWxlLi0tb3V0bGluZS1zdHlsZV09XCJvdXRsaW5lQm9yZGVyU3R5bGVcIlxuICBbbmdDbGFzc109XCJ7J3MtaWNvbi1idXR0b24nOiBpY29uLCAncy1yYWlzZWQtYnV0dG9uJzogcmFpc2VkLCAncy1vdXRsaW5lLWJ1dHRvbic6IG91dGxpbmUsXG4gICAgJ3MtZmxhdC1idXR0b24nOiBmbGF0LCAncy1mYWItYnV0dG9uJzogZmFiLCAncy1taW5pLWZhYi1idXR0b24nOiBtaW5pRmFiLCAnZGlzYWJsZWQnOiBkaXNhYmxlZH1cIj5cbiAgPGRpdiBjbGFzcz1cInMtYnV0dG9uLWZvY3VzXCIgW3N0eWxlLi0taG92ZXItY29sb3JdPVwiaG92ZXJDb2xvclwiIFtzdHlsZS4tLWFjdGl2ZS1jb2xvcl09XCJhY3RpdmVDb2xvclwiPjwvZGl2PlxuICA8c3BhbiBjbGFzcz1cInMtYnV0dG9uLWNvbnRlbnRcIj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9zcGFuPlxuPC9idXR0b24+XG4iXX0=